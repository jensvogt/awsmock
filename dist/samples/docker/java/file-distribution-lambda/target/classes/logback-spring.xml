<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <springProperty scope="context" name="service_name" source="spring.application.name"/>

    <appender name="json" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="net.logstash.logback.encoder.LogstashEncoder">
            <includeCallerData>true</includeCallerData>
            <customFields>{"service":"${service_name}"}</customFields>
        </encoder>
    </appender>
    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <!-- @formatter:off -->
            <pattern>%d{yyyy-MM-dd HH:mm:ss.SSS} %magenta([%-16.16t]) %highlight(%-5le) %cyan(%45.45(%logger{25}.%file:%line)) : %msg %n</pattern>
            <!-- @formatter:on -->
        </encoder>
    </appender>

    <springProfile name="awsmock">
        <root additivity="false">
            <appender-ref ref="console"/>
        </root>
    </springProfile>
</configuration>
