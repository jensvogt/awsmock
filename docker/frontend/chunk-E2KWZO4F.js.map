{
  "version": 3,
  "sources": ["src/app/modules/infrastructure/import/file-import/file-import.component.ts", "src/app/modules/infrastructure/import/file-import/file-import.component.html"],
  "sourcesContent": ["import {Component, ElementRef, Inject, signal, ViewChild} from '@angular/core';\nimport {MatCard, MatCardActions, MatCardContent, MatCardHeader, MatCardSubtitle} from \"@angular/material/card\";\nimport {MatButton, MatIconButton, MatMiniFabButton} from \"@angular/material/button\";\nimport {MatIcon} from \"@angular/material/icon\";\nimport {MAT_DIALOG_DATA, MatDialogActions, MatDialogClose, MatDialogContent, MatDialogRef, MatDialogTitle} from \"@angular/material/dialog\";\nimport {MatTooltip} from \"@angular/material/tooltip\";\nimport {FormsModule} from \"@angular/forms\";\nimport {MatFormField, MatLabel} from \"@angular/material/form-field\";\nimport {MatInput} from \"@angular/material/input\";\nimport {MatSnackBar} from \"@angular/material/snack-bar\";\nimport {NgIf, NgOptimizedImage} from \"@angular/common\";\n\n@Component({\n    selector: 'import-file-component',\n    templateUrl: './file-import.component.html',\n    standalone: true,\n    imports: [\n        MatCard,\n        MatCardHeader,\n        MatCardContent,\n        MatCardActions,\n        MatCardSubtitle,\n        MatIcon,\n        MatIconButton,\n        MatTooltip,\n        FormsModule,\n        MatButton,\n        MatDialogActions,\n        MatDialogClose,\n        MatDialogContent,\n        MatDialogTitle,\n        MatFormField,\n        MatInput,\n        MatLabel,\n        MatMiniFabButton,\n        NgIf,\n        NgOptimizedImage\n    ],\n    styleUrls: ['./file-import.component.scss'],\n})\nexport class FileImportComponent {\n\n    imageName = signal('');\n    fileSize = signal(0);\n    uploadProgress = signal(0);\n    imagePreview = signal('');\n    @ViewChild('fileInput') fileInput: ElementRef | undefined;\n    selectedFile: File | null = null;\n    uploadSuccess: boolean = false;\n    uploadError: boolean = false;\n\n    constructor(private snackBar: MatSnackBar, private dialogRef: MatDialogRef<FileImportComponent>, @Inject(MAT_DIALOG_DATA) public data: any) {\n    }\n\n    // Method to handle file upload\n    // Handler for file input change\n    onFileChange(event: any): void {\n        const file = event.target.files[0] as File | null;\n        this.uploadFile(file);\n    }\n\n    // Handler for file drop\n    onFileDrop(event: DragEvent): void {\n        event.preventDefault();\n        const file = event.dataTransfer?.files[0] as File | null;\n        this.uploadFile(file);\n    }\n\n    // Prevent default dragover behavior\n    onDragOver(event: DragEvent): void {\n        event.preventDefault();\n    }\n\n    // Method to handle file upload\n    uploadFile(file: File | null): void {\n        if (file && file.type.startsWith('application/json')) {\n            this.selectedFile = file;\n            this.fileSize.set(Math.round(file.size / 1024)); // Set file size in KB\n\n            const reader = new FileReader();\n            reader.onload = () => {\n                this.dialogRef.close(reader.result as string);\n            };\n            reader.readAsText(file);\n\n            this.uploadSuccess = true;\n            this.uploadError = false;\n        } else {\n            this.uploadSuccess = false;\n            this.uploadError = true;\n            this.snackBar.open('Only JSON files are supported!', 'Close', {duration: 3000, panelClass: 'error'});\n        }\n    }\n\n    // Method to remove the uploaded files\n    removeFile(): void {\n        this.selectedFile = null;\n        this.imageName.set('');\n        this.fileSize.set(0);\n        this.imagePreview.set('');\n        this.uploadSuccess = false;\n        this.uploadError = false;\n        this.uploadProgress.set(0);\n    }\n}\n", "<h2 mat-dialog-title>Upload Infrastructure</h2>\n<mat-dialog-content class=\"mat-typography\" style=\"width: 500px;height:200px\">\n    <div (dragover)=\"onDragOver($event)\" (drop)=\"onFileDrop($event)\" [class.error]=\"uploadError\" [class.success]=\"uploadSuccess\" class=\"file-upload-wrapper\">\n        <input #fileInput (change)=\"onFileChange($event)\" accept=\"application/json\" hidden type=\"file\"/>\n        <div (click)=\"fileInput.click()\" class=\"file-dropper\">\n            <mat-icon>upload</mat-icon>\n            <p>Upload file</p>\n        </div>\n    </div>\n</mat-dialog-content>\n<mat-dialog-actions align=\"end\">\n    <button mat-button mat-dialog-close>Cancel</button>\n    <!--button (click)=\"upload($event)\" cdkFocusInitial mat-button>Upload</button-->\n</mat-dialog-actions>\n"],
  "mappings": "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",
  "names": []
}
